---
import NavBar from "@components/header/Header.astro";
---

<main
  id="mask"
  class="fixed -top-1 flex items-center justify-between w-full z-30 p-2"
>
  <section id="navWrapper" class="w-full transition-opacity md:opacity-100">
    <NavBar />
  </section>
</main>
<script>
  function initNav() {
    const navWrapper = document.getElementById("navWrapper");
    if (!navWrapper) return;

    const handleScroll = () => {
      const isDown = window.scrollY > 30;
      navWrapper.classList.toggle("opacity-0", isDown);
      navWrapper.classList.toggle("opacity-100", !isDown);
    };

    window.addEventListener("scroll", handleScroll);
    handleScroll();

    document.addEventListener(
      "astro:before-preparation",
      () => window.removeEventListener("scroll", handleScroll),
      { once: true },
    );
  }

  document.addEventListener("astro:page-load", initNav);
</script>
